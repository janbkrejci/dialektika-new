<!DOCTYPE html>
<html lang="cs">

<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Dialektika | Web dobrovolného sdružení občanů České republiky Dialektika.</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Dialektika" />
<meta property="og:locale" content="cs" />
<meta name="description" content="Web dobrovolného sdružení občanů České republiky Dialektika." />
<meta property="og:description" content="Web dobrovolného sdružení občanů České republiky Dialektika." />
<meta property="og:site_name" content="Dialektika" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Dialektika" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Web dobrovolného sdružení občanů České republiky Dialektika.","headline":"Dialektika","url":"/aktivity"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/app.css">
  <script type='text/javascript'
    src='https://platform-api.sharethis.com/js/sharethis.js#property=602a9e560cf79300112b0f9c&product=inline-share-buttons'
    async='async'></script>
  <script>
    if (sessionStorage.getItem("refresh") == "true") {
      sessionStorage.removeItem("refresh"); window.location.reload()
    }
    function back() {
      let target = document.referrer;
      if (!target || target.match(window.location.href)) target = '/';
      window.location.replace(target);
    }
    window.back = back;
  </script>
</head>

<body x-data="user">
  <header x-cloak class="print:hidden text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100">
  <nav class="mx-auto flex items-center justify-between p-6 lg:px-8" aria-label="Globální navigace">
    <div class="flex lg:flex-1">
      <a href="/" class="-m-1.5 p-1.5">
        <span class="sr-only">Dialektika</span>
        <div class="logo w-8 h-8 bg-gray-900 dark:bg-gray-100"></div>
      </a>
    </div>
    <div class="flex lg:hidden">
      <button type="button"
        class="-m-2.5 inline-flex items-center justify-center rounded-md p-2.5  text-gray-700 dark:text-gray-100"
        @click="user_showSidebar = true">
        <span class="sr-only">Hlavní nabídka</span>
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
    <div class="hidden lg:flex lg:gap-x-12">
      <a href="/program">Program</a>
      <a href="/stanovy">Stanovy</a>
      <a href="/stanoviska">Přijatá stanoviska</a>
      <a href="/blog">Blog</a>
      <!-- for logged-in users -->
      <a x-show="user_id" href="/aktivity">Aktivity</a>
      <a x-show="user_id" href="/organizace">Organizace</a>
      <a x-show="user_id" href="/lide">Lidé</a>
      <a x-show="user_id" href="/ja">Já</a>
    </div>
    <div class="hidden lg:flex lg:flex-1 lg:justify-end">
      <a x-show="!user_id" href="/login" @click.prevent="window.location.replace($el.href)">Přihlášení <span
          aria-hidden="true">&rarr;</span></a>
      <a x-show="user_id" href="#" @click.prevent="logout">Odhlášení
        <span aria-hidden="true">&rarr;</span></a>
    </div>
  </nav>
  <!-- Mobile menu, show/hide based on menu open state. -->
  <div x-show="user_showSidebar" class="lg:hidden" role="dialog" aria-modal="true">
    <!-- Background backdrop, show/hide based on slide-over state. -->
    <div class="fixed inset-0 z-10" @click="user_showSidebar = false"></div>
    <div focus="true"
      class="fixed inset-y-0 right-0 z-10 w-full overflow-y-auto bg-white dark:bg-gray-900 px-6 py-6 sm:max-w-sm sm:ring-1 sm:ring-gray-900/10 dark:sm:ring-gray-100/10 scrollbar-hide ">
      <div class="flex items-center justify-between">
        <a href="/" class="-m-1.5 p-1.5 visible sm:invisible">
          <span class="sr-only">Dialektika</span>
          <div class="logo w-8 h-8 bg-gray-900 dark:bg-gray-100"></div>
        </a>
        <button type="button" class="-m-2.5 rounded-md p-2.5" @click="user_showSidebar = false">
          <span class="sr-only">Zavřít nabídku</span>
          <svg class="h-6 w-6 text-gray-700 dark:text-gray-100" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <div class="mt-6 flow-root">
        <div class="-my-6 divide-y divide-gray-500/10 dark:divide-gray-300/10">
          <div class="space-y-2 py-6">
            <a href="/program"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Program</a>
            <a href="/stanovy"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Stanovy</a>
            <a href="/stanoviska"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Přijatá
              stanoviska</a>
            <a href="/blog"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Blog</a>
          </div>
          <!-- for logged-in users -->
          <div x-show="user_id" class="space-y-2 py-6">
            <a href="/aktivity"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Aktivity</a>
            <a href="/organizace"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Organizace</a>
            <a href="/lide"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Lidé</a>
            <a href="/ja"
              class="-mx-3 block rounded-lg py-2 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Já</a>
          </div>
          <div class="py-6">
            <a x-show="!user_id" href="/login" @click.prevent="window.location.replace($el.href)"
              class="-mx-3 block rounded-lg py-2.5 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Přihlášení</a>
            <a x-show="user_id" @click.prevent="logout"
              class="-mx-3 block rounded-lg py-2.5 px-3 text-base font-semibold leading-7 text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700">Odhlášení</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header><main x-cloak>
  <script>
  // return back if not logged in
  if (!localStorage.pocketbase_auth) {
    back();
  }
</script>
<div x-data="aktivity" x-show="user_id" x-effect="if (!user_id) back();">
  <h1>Aktivity</h1>

  <!-- navigation -->
  <div class="flex grow justify-between">
    <a href="aktivity">Hlasování</a>
    <a href="?state=vysledky" ">Výsledky</a>
  </div>

  <div class=" separator mt-8">
  </div>

  <!-- results -->
  <div x-show="state === 'vysledky'">
    <h2>Výsledky hlasování</h2>

    <div x-show="!collections.votings" class="alert px-2 mb-8">
      Nahrávám...
    </div>
    <div x-show="collections.votings && !closedItems().length" class="alert success px-2 mb-8">
      V tuto chvíli zde žádná uzavřená témata nejsou.
    </div>
    <table class="table-auto" x-show="closedItems().length">
      <thead>
        <tr>
          <th>Odhlasováno</th>
          <th>Návrh</th>
          <th class="text-center">Výsledek</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="item in closedItems">
          <tr :id="item.id" @click="showDetail(item.id)">
            <td x-text="utils.formatDate(item.votingClosed)"></td>
            <td x-text="item.finalSubject"></td>
            <td>
              <div x-show="item.votingResult" class="btn success">Schváleno</div>
              <div x-show="!item.votingResult" class="btn error">Zamítnuto</div>
            </td>
          </tr>
        </template>
      </tbody>
    </table>

    <h2>Zamítnutá témata</h2>

    <div x-show="!collections.votings" class="alert px-2 mb-8">
      Nahrávám...
    </div>
    <div x-show="collections.votings && !rejectedItems().length" class="alert success px-2 mb-8">
      V tuto chvíli zde žádná zamítnutá témata nejsou.
    </div>
    <table x-show="rejectedItems().length">
      <thead>
        <tr>
          <th>Zamítnuto</th>
          <th class="w-full">Předmět</th>
          <th class="text-center">Akce</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="item in rejectedItems">
          <tr :id="item.id" @click="showDetail(item.id)">
            <td x-text="utils.formatDate(item.preselectionClosed)"></td>
            <td x-text="item.subject"></td>
            <td>
              <button class="primary" @click.stop="reOpen(item.id)">Znovu otevřít</button>
            </td>
          </tr>
        </template>
      </tbody>
    </table>

  </div>

  <!-- voting -->
  <div x-show="state === 'hlasovani'">
    <h2>Moje hlasování</h2>

    <div x-show="!collections.votings" class="alert px-2 mb-8">
      Nahrávám...
    </div>
    <div x-show="collections.votings && !votingItems().length" class="alert success px-2 mb-8">
      V tuto chvíli zde žádná hlasování nejsou.
    </div>
    <table x-show="votingItems().length">
      <thead>
        <tr>
          <th>Termín</th>
          <th class="w-full">Předmět</th>
          <th class="text-center">Pustit k diskusi</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="item in votingItems">
          <tr :id="item.id" @click="showDetail(item.id)">
            <td x-text="utils.formatDate(utils.addWeek(item.preselectionClosed))"></td>
            <td x-text="item.subject"></td>
            <td class="text-center">
              <button :disabled="disabled" class="success w-1/2" @click.stop="vote(item.id, true)">PRO</button>
              <button :disabled="disabled" class="error w-1/2" @click.stop="vote(item.id, false)">PROTI</button>
            </td>
          </tr>
        </template>
      </tbody>
    </table>

    <h2>Témata v diskusi</h2>

    <div x-show="!collections.votings" class="alert px-2 mb-8">
      Nahrávám...
    </div>
    <div x-show="collections.votings && !elaboratingItems().length" class="alert success px-2 mb-8">
      V tuto chvíli zde žádná diskuse neprobíhá.
    </div>
    <table x-show="elaboratingItems().length">
      <thead>
        <tr>
          <th>Termín</th>
          <th class="w-full">Předmět</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="item in elaboratingItems">
          <tr :id="item.id" @click="showDetail(item.id)">
            <td x-text="utils.formatDate(utils.addWeek(item.preselectionClosed))"></td>
            <td x-text="item.subject"></td>
          </tr>
        </template>
      </tbody>
    </table>

    <h2>Navržená témata</h2>

    <div x-show="!collections.votings" class="alert px-2 mb-8">
      Nahrávám...
    </div>
    <div x-show="collections.votings && !suggestedItems().length" class="alert success px-2 mb-8">
      V tuto chvíli zde žádná navržená témata nejsou.
    </div>
    <table x-show="suggestedItems().length">
      <thead>
        <tr>
          <th>Termín</th>
          <th class="w-full">Předmět</th>
          <th class="text-center">Pustit k diskusi</th>
        </tr>
      </thead>
      <tbody>
        <template x-for="item in suggestedItems">
          <tr :id="item.id" @click="showDetail(item.id)">
            <td x-text="utils.formatDate(utils.addWeek(item.created))"></td>
            <td x-text="item.subject"></td>
            <td class="text-center">
              <button :disabled="disabled" class="success w-1/2" @click.stop="vote(item, true)">ANO</button>
              <button :disabled="disabled" class="error w-1/2" @click.stop="vote(item, false)">NE</button>
            </td>
          </tr>
        </template>
      </tbody>
    </table>

    <button class="primary mt-8" @click="showDetail(null)">Navrhnout téma</button>
  </div>

  <!-- detail -->
  <div x-show="state === 'detail'" @keyup.escape.window="hideDetail()" @keydown.enter.prevent="next">
    <button class="primary" @click="hideDetail()">&lt;&lt; Zpět</button>
    <h2 class="mt-4">
      <span x-show="selectedItem.state === 'closed'">Uzavřené hlasování</span>
      <span x-show="selectedItem.state === 'voting'">Hlasování</span>
      <span x-show="selectedItem.state === 'elaborating'">Téma v diskusi</span>
      <span x-show="selectedItem.state === 'rejected'">Zamítnuté téma</span>
      <span x-show="selectedItem.state === 'suggested'">Navržené téma</span>
      <span x-show="selectedItem.state === 'new'">Nové téma</span>
    </h2>

    <div class="alert error px-2" x-show="errors.submitError" x-text="errors.submitError"></div>

    <div x-show="selectedItem.state === 'new'" x-data="{preview: false}">
      <div>
        <label for="subject">Předmět *</label>
        <input id="subject" :class="{'input': true, 'error': errors.subjectError}" type="text"
          x-model="selectedItem.subject" @input="selectedItem.subject = $el.value" @blur="validate($el.id)">
        <div class="error-text" x-text="errors.subjectError"></div>
      </div>
      <div>
        <label for="description">Popis *</label>
        <label tabindex="-1" class="relative inline-flex items-center cursor-pointer">
          <input tabindex="-1" type="checkbox" x-model="preview" class="sr-only peer">
          <div tabindex="-1"
            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600">
          </div>
          <span tabindex="-1" class="ml-3 text-sm font-medium text-gray-900 dark:text-gray-300">Náhled (můžete použít <a
              tabindex="-1" target="_blank" href="">MarkDown značky</a>)</span>
        </label>
        <textarea rows=10 id="description" style="resize: none" x-show="!preview"
          :class="{'input': true, 'error': errors.descriptionError, 'hidescrollbar': true}"
          x-model="selectedItem.description" @input="selectedItem.description = $el.value"
          @keydown.enter.stop="() => {}" @blur="validate($el.id)"></textarea>
        <div class="error-text" x-text="errors.descriptionError"></div>
        <div class="border rounded-lg shadow-md px-8 py-0" x-html="utils.convertMD(selectedItem?.description || '')"
          x-show="preview"></div>
      </div>
      <button :disabled="disabled" class="primary mt-8" @click="doCreateTopic">Navrhnout téma</button>
    </div>

    <div x-show="selectedItem.state === 'suggested'">
      <div class="border rounded-lg shadow-md px-8 py-0">
        <div class="flex justify-between text-sm pt-2">
          <span>Navrhovatel: <span x-text="userName(selectedItem.author)"></span></span>
          <span>Navrženo: <span x-text="utils.formatDate(selectedItem.created)"></span></span>
        </div>
        <h1 class="pt-8" x-text="selectedItem.subject"></h1>
        <div x-html="utils.convertMD(selectedItem?.description || '')"></div>
      </div>
      <h2>Ostatní hlasující:</h2>
      <div x-show="(votersFor(selectedItem).length || 0) < 2" class="alert success px-2 mb-8">
        Nikdo další nebude hlasovat.
      </div>
      <table class="table-auto" x-show="(votersFor(selectedItem).length || 0) > 1">
        <thead>
          <tr>
            <th class="w-full">Jméno</th>
            <th>Názor</th>
            <th>Kdy</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="u in votersFor(selectedItem)">
            <tr x-show="u !== user_id">
              <td x-text="userName(u)">Hledám...</td>
              <td x-text="utils.boolToString(voteOfFor(u, selectedItem)?.vote, 'ANO', 'NE', '')">
              </td>
              <td x-text="utils.formatDate(voteOfFor(u, selectedItem)?.created)"></td>
            </tr>
          </template>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-right">Pro: <span x-text="positiveVotesFor(selectedItem)"></span>, Proti: <span
                x-text="negativeVotesFor(selectedItem)"></span></td>
          </tr>
        </tfoot>
      </table>
      <h2>Pustit k diskusi? (termín <span x-text="utils.formatDate(utils.addWeek(selectedItem?.created))"></span>)</h2>
      <p>
        <button :disabled="disabled" class="success w-20" @click="vote(selectedItem, true)">ANO</button>
        <button :disabled="disabled" class="error w-20" @click="vote(selectedItem, false)">NE</button>
      </p>
    </div>

    <div x-show="selectedItem.state === 'elaborating'">
      <div class="border rounded-lg shadow-md px-8 py-0">
        <div class="flex justify-between text-sm pt-2">
          <span>Navrhovatel: <span x-text="userName(selectedItem.author)"></span></span>
          <span>Schváleno: <span x-text="utils.formatDate(selectedItem.preselectionClosed)"></span></span>
        </div>
        <h1 class="pt-8" x-text="selectedItem.subject"></h1>
        <div x-html="utils.convertMD(selectedItem?.description || '')"></div>
      </div>
      <h2>Předvýběr:</h2>
      <table class="table-auto" x-show="(selectedItem?.voters?.length || 0) > 1">
        <thead>
          <tr>
            <th class="w-full">Jméno</th>
            <th>Názor</th>
            <th>Kontumační?</th>
            <th>Kdy</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="u in selectedItem.voters">
            <tr>
              <td x-text="u === user_id ? 'Já' : userName(u)">Hledám...</td>
              <td x-text="utils.boolToString((selectedItem.preselections || {})[u]?.preselection, 'ANO', 'NE', '')">
              </td>
              <td
                x-text="utils.boolToString((selectedItem.preselections || {})[u]?.preselectionActive, 'NE', 'ANO', '')">
              </td>
              <td x-text="utils.formatDate((selectedItem.preselections || {})[u]?.preselectionDate)"></td>
            </tr>
          </template>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4">Pro: TODO, Proti: TODO</td>
          </tr>
        </tfoot>
      </table>
      <h2>Diskuse: (termín <span x-text="utils.formatDate(utils.addWeek(selectedItem?.preselectionClosed))"></span>)
      </h2>
      TODO
    </div>

    <div x-show="selectedItem.state === 'rejected'">
      <div class="border rounded-lg shadow-md px-8 py-0">
        <div class="flex justify-between text-sm pt-2">
          <span>Navrhovatel: <span x-text="userName(selectedItem.author)"></span></span>
          <span>Zamítnuto: <span x-text="utils.formatDate(selectedItem.preselectionClosed)"></span></span>
        </div>
        <h1 class="pt-8" x-text="selectedItem.subject"></h1>
        <div x-html="utils.convertMD(selectedItem?.description || '')"></div>
      </div>
      <h2>Hlasování:</h2>
      <table class="table-auto">
        <thead>
          <tr>
            <th class="w-full">Jméno</th>
            <th>Názor</th>
            <th>Kontumační?</th>
            <th>Kdy</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="u in votersFor(selectedItem)">
            <tr>
              <td x-text="u === user_id ? 'Já' : userName(u)">Hledám...</td>
              <td x-text="utils.boolToString(voteOfFor(u, selectedItem)?.vote, 'ANO', 'NE', '')">
              </td>
              <td x-text="utils.boolToString(voteOfFor(u, selectedItem)?.voteActive, 'NE', 'ANO', '')">
              </td>
              <td x-text="utils.formatDate(voteOfFor(u, selectedItem)?.created)"></td>
            </tr>
          </template>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" class="text-right">Pro: <span x-text="positiveVotesFor(selectedItem)"></span>, Proti: <span
                x-text="negativeVotesFor(selectedItem)"></span></td>
          </tr>
        </tfoot>
      </table>

      <p>
        <button :disabled="disabled" class="primary" @click="reOpen(selectedItem.id)">Znovu otevřít</button>
      </p>
    </div>

  </div>
</div>
</main><footer x-cloak class="print:hidden">
  <!-- ShareThis BEGIN -->
  <div class="sharethis-inline-share-buttons grow"></div>
  <!-- ShareThis END -->
  <a href="/gdpr">Ochrana osobních údajů</a>
</footer>
  <script src="/assets/js/app.js"></script>
</body>

</html>